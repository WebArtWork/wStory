import{e as $}from"./chunk-CLQKAVLW.js";import"./chunk-N6ULEWAM.js";import{A as F,Fb as V,G as I,Gb as B,I as k,Ib as H,L as s,M as D,N as g,R as j,X as y,Y as l,Z as p,bb as O,ca as C,da as m,ea as v,f as d,i as u,jb as P,kb as E,oa as S,qa as M,qb as N,r as a,s as f,tb as R,u as w,v as T,w as h,x as _,zb as A}from"./chunk-OMW3WEZW.js";var z={formId:"file",title:"File",components:[{name:"Photo",key:"path",fields:[{name:"Label",value:"Image"},{name:"Wdith",value:1920},{name:"Height",value:1080}]}]};var L=(()=>{let e=class e extends N{constructor(t){super({name:"file"}),this._file=t,this._file.add({id:"formPhoto",resize:1920,cb:i=>{typeof i=="string"&&typeof this.setFile=="function"&&this.setFile(i)}}),this._file.add({id:"formPhotos",multiple:!0,resize:1920,cb:i=>{typeof i=="string"&&typeof this.setFile=="function"&&this.setFile(i)}})}};e.\u0275fac=function(i){return new(i||e)(w(R))},e.\u0275prov=a({token:e,factory:e.\u0275fac,providedIn:"root"});let o=e;return o})();var x=class{_document;_textarea;constructor(e,n){this._document=n;let t=this._textarea=this._document.createElement("textarea"),i=t.style;i.position="fixed",i.top=i.opacity="0",i.left="-999em",t.setAttribute("aria-hidden","true"),t.value=e,t.readOnly=!0,(this._document.fullscreenElement||this._document.body).appendChild(t)}copy(){let e=this._textarea,n=!1;try{if(e){let t=this._document.activeElement;e.select(),e.setSelectionRange(0,e.value.length),n=this._document.execCommand("copy"),t&&t.focus()}}catch{}return n}destroy(){let e=this._textarea;e&&(e.remove(),this._textarea=void 0)}},U=(()=>{class o{_document=T(F);constructor(){}copy(n){let t=this.beginCopy(n),i=t.copy();return t.destroy(),i}beginCopy(n){return new x(n,this._document)}static \u0275fac=function(t){return new(t||o)};static \u0275prov=a({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function X(o,e){if(o&1){let n=C();l(0,"img",3),m("click",function(){let i=h(n).$implicit,r=v();return _(r.copy(i.url))}),p()}if(o&2){let n=e.$implicit;y("src",n.url,I)}}function ee(o,e){if(o&1){let n=C();l(0,"span",4),m("click",function(){let i=h(n).$implicit,r=v();return _(r.copy(i.url))}),S(1),p()}if(o&2){let n=e.$implicit;k(),M(" ",n.url," ")}}var Y=(()=>{let e=class e{constructor(t,i,r,Z,G,K){this._translate=t,this._fileService=i,this._clipboard=r,this._alert=Z,this._form=G,this._core=K,this.columns=["img","url"],this.form=this._form.prepareForm(z),this.config={paginate:this.setRows.bind(this),perPage:20,setPerPage:this._fileService.setPerPage.bind(this._fileService),allDocs:!1,create:()=>{this._form.modal(this.form,{label:"Create",click:(c,W)=>d(this,null,function*(){W(),this._preCreate(c),yield u(this._fileService.create(c)),this.setRows()})})},delete:c=>{this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this file?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>d(this,null,function*(){yield u(this._fileService.delete(c)),this.setRows()})}]})}},this.rows=[],this._page=1,this.setRows()}copy(t){this._clipboard.copy(t),this._alert.info({text:"Url has been copied"})}setRows(t=this._page){this._page=t,this._core.afterWhile(this,()=>{this._fileService.get({page:t}).subscribe(i=>{this.rows.splice(0,this.rows.length),this.rows.push(...i)})},250)}_preCreate(t){delete t.__created}};e.\u0275fac=function(i){return new(i||e)(s(A),s(L),s(U),s(E),s(H),s(P))},e.\u0275cmp=D({type:e,selectors:[["ng-component"]],standalone:!1,decls:3,vars:3,consts:[["title","Files",3,"columns","config","rows"],["cell","img"],["cell","url"],[2,"height","100px",3,"click","src"],[3,"click"]],template:function(i,r){i&1&&(l(0,"wtable",0),j(1,X,1,1,"ng-template",1)(2,ee,2,1,"ng-template",2),p()),i&2&&y("columns",r.columns)("config",r.config)("rows",r.rows)},dependencies:[B,V],encapsulation:2});let o=e;return o})();var te=[{path:"",component:Y}],Fe=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=g({type:e}),e.\u0275inj=f({imports:[O.forChild(te),$]});let o=e;return o})();export{Fe as FilesModule};
